# TravelMap Russia v2.0

Веб-приложение для планирования туристических маршрутов по России с авторизацией и серверным хранением данных.

## Версии проекта

- **v1.0** - Фронтенд версия (localStorage, без сервера)
- **v2.0** - Полноценное приложение с Flask backend и авторизацией

## Технологии

### Frontend
- HTML5, CSS3, JavaScript (ES6+)
- Leaflet.js для интерактивных карт
- OpenStreetMap для картографических данных

### Backend
- Python 3.8+
- Flask (веб-фреймворк)
- Flask-CORS (для работы с фронтендом)
- JSON файлы для хранения данных (без БД)

## Структура проекта

```
TravelAPP/
├── app.py              # Flask backend сервер
├── init_data.py        # Скрипт инициализации данных
├── requirements.txt    # Зависимости Python
├── index.html          # Главная страница
├── style.css           # Стили приложения
├── script.js           # Логика фронтенда
├── README.md           # Документация
└── data/               # Папка с данными (создаётся автоматически)
    ├── users.json      # Пользователи
    ├── tokens.json     # Активные токены
    ├── places.json     # Интересные места
    └── routes.json     # Маршруты пользователей
```

## Установка и запуск

### Вариант 1: Запуск через Docker (рекомендуется)

Самый простой способ запустить приложение:

```bash
# Сборка и запуск
docker-compose up --build

# Или в фоновом режиме
docker-compose up -d --build
```

Приложение будет доступно по адресу: `http://localhost:5001`

**Примечание:** Используется порт 5001 вместо 5000, так как порт 5000 часто занят системным процессом macOS (AirPlay Receiver).

Для остановки:
```bash
docker-compose down
```

**Преимущества Docker:**
- Не нужно устанавливать Python и зависимости вручную
- Изолированная среда
- Автоматическая инициализация данных
- Данные сохраняются в папке `data/` на хосте

### Вариант 2: Локальный запуск

#### 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

#### 2. Инициализация данных

Запустите скрипт для создания файла с местами:

```bash
python init_data.py
```

Это создаст папку `data/` и файл `places.json` с 15 достопримечательностями России.

#### 3. Запуск сервера

```bash
python app.py
```

Сервер запустится на `http://localhost:5000`

#### 4. Открытие приложения

Откройте в браузере: `http://localhost:5000`

Примечание: Flask теперь раздаёт и статические файлы (HTML, CSS, JS), поэтому отдельный веб-сервер не нужен.

## API Эндпоинты

### Авторизация

- `POST /api/register` - Регистрация нового пользователя
  ```json
  {
    "username": "user123",
    "password": "password123"
  }
  ```

- `POST /api/login` - Вход пользователя
  ```json
  {
    "username": "user123",
    "password": "password123"
  }
  ```
  Возвращает токен авторизации.

### Публичные эндпоинты

- `GET /api/places` - Получить список интересных мест (без авторизации)

### Защищённые эндпоинты (требуют токен в заголовке Authorization)

- `GET /api/routes` - Получить маршруты текущего пользователя
- `POST /api/routes` - Сохранить маршрут
  ```json
  {
    "places": [{"id": 1, "name": "...", ...}, ...]
  }
  ```
- `DELETE /api/routes` - Очистить маршрут пользователя

## Функционал

### Для пользователя

1. **Регистрация и вход**
   - Простая регистрация с username и password
   - Автоматический вход при следующем посещении

2. **Интерактивная карта**
   - 15 достопримечательностей России
   - Клик по метке показывает информацию о месте

3. **Планирование маршрута**
   - Добавление мест в маршрут
   - Визуализация маршрута линией на карте
   - Сохранение маршрута на сервере

4. **Управление маршрутом**
   - Просмотр списка мест в маршруте
   - Удаление мест из маршрута
   - Очистка всего маршрута

## Безопасность

⚠️ **Важно**: Это учебный проект. Для продакшена требуется:

- Использование HTTPS
- Более надёжное хэширование паролей (bcrypt)
- JWT токены с истечением срока
- Валидация и санитизация входных данных
- Защита от SQL-инъекций (при использовании БД)
- Rate limiting для API

## Особенности реализации

- **Простота**: Код написан для понимания школьниками 11 класса
- **Без БД**: Использование JSON файлов для хранения
- **Простая авторизация**: Токены хранятся в JSON файле
- **CORS**: Настроен для работы фронтенда и бэкенда на разных портах

## Docker команды

### Сборка образа
```bash
docker-compose build
```

### Запуск
```bash
docker-compose up
```

### Запуск в фоне
```bash
docker-compose up -d
```

### Остановка
```bash
docker-compose down
```

### Просмотр логов
```bash
docker-compose logs -f
```

### Пересборка после изменений
```bash
docker-compose up --build
```

### Очистка (удаление контейнеров и образов)
```bash
docker-compose down -v
docker rmi travelapp-backend
```

## Разработка

### Добавление новых мест

Отредактируйте `data/places.json` или используйте API (можно добавить эндпоинт `POST /api/places`).

### Расширение функционала

- Добавление категорий мест
- Фильтрация по регионам
- Оптимизация маршрута
- Экспорт маршрута в PDF/GPX
- Социальные функции (поделиться маршрутом)

## Лицензия

Учебный проект для демонстрации веб-разработки.

## Автор

Проект создан для учебных целей.
